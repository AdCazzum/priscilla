{
  "schema_version": "wasm-abi/1",
  "types": {
    "DiscoverOutcome": {
      "kind": "record",
      "fields": [
        {
          "name": "opponent_number",
          "type": {
            "kind": "i64"
          }
        },
        {
          "name": "game",
          "type": {
            "$ref": "GameView"
          }
        }
      ]
    },
    "GamePhase": {
      "kind": "variant",
      "variants": [
        {
          "name": "Setup"
        },
        {
          "name": "InProgress"
        },
        {
          "name": "Finished"
        }
      ]
    },
    "GameView": {
      "kind": "record",
      "fields": [
        {
          "name": "phase",
          "type": {
            "$ref": "GamePhase"
          }
        },
        {
          "name": "current_turn",
          "type": {
            "kind": "string"
          },
          "nullable": true
        },
        {
          "name": "winner",
          "type": {
            "kind": "string"
          },
          "nullable": true
        },
        {
          "name": "players",
          "type": {
            "kind": "list",
            "items": {
              "$ref": "PlayerView"
            }
          }
        }
      ]
    },
    "PlayerView": {
      "kind": "record",
      "fields": [
        {
          "name": "id",
          "type": {
            "kind": "string"
          }
        },
        {
          "name": "number",
          "type": {
            "kind": "i64"
          },
          "nullable": true
        },
        {
          "name": "number_submitted",
          "type": {
            "kind": "bool"
          }
        },
        {
          "name": "discovered",
          "type": {
            "kind": "bool"
          }
        }
      ]
    }
  },
  "methods": [
    {
      "name": "init",
      "params": [],
      "returns": {
        "kind": "unit"
      }
    },
    {
      "name": "submit_number",
      "params": [
        {
          "name": "player_id",
          "type": {
            "kind": "string"
          }
        },
        {
          "name": "number",
          "type": {
            "kind": "i64"
          }
        }
      ],
      "returns": {
        "$ref": "GameView"
      }
    },
    {
      "name": "discover_number",
      "params": [
        {
          "name": "player_id",
          "type": {
            "kind": "string"
          }
        }
      ],
      "returns": {
        "$ref": "DiscoverOutcome"
      }
    },
    {
      "name": "game_state",
      "params": [],
      "returns": {
        "$ref": "GameView"
      }
    },
    {
      "name": "start_new_game",
      "params": [],
      "returns": {
        "$ref": "GameView"
      }
    }
  ],
  "events": [
    {
      "name": "PlayerRegistered"
    },
    {
      "name": "NumberSubmitted"
    },
    {
      "name": "NumberDiscovered"
    },
    {
      "name": "TurnChanged"
    },
    {
      "name": "GameFinished"
    },
    {
      "name": "GameReset"
    }
  ]
}